########################################################################
# This is the configuration file of GridPilot
#
# Sections:
#
# - GridPilot : contains general parameters
# - File transfer systems : information about the file transfer systems
# - - For each system defined in File transfer systems, a section is required
# - Databases : information about the database connection
# - - For each system defined in Databases, a section is required
# - Computing Systems : contains the list of computing systems
# - - For each system defined in section Computing Systems, a section is required
#
# All tags are case insensitive, and a text after a # is a comment (but \# is allowed)
#
# Authors :
#
# - Vandy BERTEN (vandy.berten@cern.ch)
# - Luc GOOSSENS (luc.goossens@cern.ch)
# - Marco NIINIMAKI (marko.niinimaki@cern.ch)
# - Frederik ORELLANA (frederik.orellana@cern.ch)
#
########################################################################

[GridPilot]
# This name is only used for field in jobDefinition tables ONLY if
# no name can be obtained from grid certificate of OS
user = firelord
# Path to images, certificates, about
resources = /resources/		
# Debug level ; 0 : all debugs are disabled, 3 : maximum.
# Notice that having a high debug level can have a big impact on performance
debug = 3

# Attributes always displayed when creating job definitions
job parameters = number name

# Inital panels (tabs) displayed
initial panels = transformation dataset

# File to store the history of the file browser
browser history file = ~/gridpilot_history.txt

# Web proxy settings
proxy server = 
proxy port =

# List of preferred files servers when down/uploading
preferred file servers = gsiftp://grid01.unige.ch gsiftp://grid00.unige.ch srm://se01-lcg.projects.cscs.ch

# number of seconds before timeout of proxy when proxy will be renewed
proxy time left limit = 43200 # 12h
proxy time valid = 129600 # 36 h
key file = ~/.globus/userkey.pem
certificate file = ~/.globus/usercert.pem
key password = 
# A comma separated list of fully qualified file or directory paths.
# If this is left blank, the default certificates shipped with GridPilot will be used
ca certificates = # ~/.globus/certificates, /etc/grid-security/certificates

# submissions
maximum simultaneous submissions = 10
time between submissions = 500 # in ms
randomized submission = no

# transfers
maximum simultaneous transfers = 10
time between transfers = 500 # in ms
randomized transfers = no
# default URL when replicating
gridftp home url = ~

# updates
maximum simultaneous checking = 10
time between checks = 500 # in ms

# validation
delay before validation = 100 # in ms
maximum simultaneous validating = 10

# timeouts (in seconds)
default timeout = 60
submit timeout = 60
updateStatus timeout = 60
killJob timeout = 60
clearOutputMapping timeout = 60
exit timeout = 60
getFullStatus timeout = 60
getCurrentOutputs timeout =  60
db timeout = 60000

#####################################################################
[File transfer systems]
#
# File transfer systems used for replicating files.
#

# These are the supported systems. The names must match the protol names.
# NOTICE: always put subsystems before high-level systems, that is,
# always put srm last.
Systems = gsiftp srm
# These ports must be inbound open in your firewall (comma-separated list)
globus tcp port range = 9001,9010
# Timeouts in seconds
copy retries = 0
copy retry timeout = 120

[gsiftp]
class = gridpilot.ftplugins.gsiftp.GSIFTPFileTransfer

[srm]
class = gridpilot.ftplugins.srm.SRMFileTransfer
# Retries to get "Ready" on a submitted transfer, before timing out
submit check retries = 2
# Time between these retries in miliseconds
submit check sleep = 10000

#####################################################################
[Databases]
#
# Databases used for storing runtime and transformation
# informations as well as file and job information.
#

# NOTICE: use ONLY ONE local database at a time
Systems = My_DB_local My_DB_Geneva ATLAS_CH ATLAS # CTB_local CTB_Geneva

#--------------------------------------------------------------------
[My_DB_local]
#
# Minimal dataset/job/file catalog for personal production/analysis.
#
class = gridpilot.dbplugins.hsqldb.HSQLDBDatabase
driver = org.hsqldb.jdbcDriver
database = hsql://localhost/~/GridPilot/My_DB
user = sa
password = ""

parameters = driver database user password

default dataset fields = name runNumber identifier
hidden dataset fields = metaData
default jobDefinition fields = name status
default file fields = dsname lfname pfname guid
file identifier = guid
file name = lfname
file dataset reference = name dsname

dataset field names = identifier,                                           name,                 transformationName, transformationVersion, metaData,         totalFiles,  totalEvents, created,  lastModified, inputDataset,     inputDB,          outputLocation
dataset field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR NOT NULL, LONGVARCHAR NULL,   LONGVARCHAR NULL,      LONGVARCHAR NULL, BIGINT NULL, BIGINT NULL, DATETIME, DATETIME,     LONGVARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR NULL

jobDefinition field names = identifier,                                           datasetName, name,        GUID,        number, eventMin, eventMax, nEvents,  outputFileSize, CPU,      status,  userInfo,    inputFileNames, transPars,   outFileMapping, md5sum,      stdoutDest,  stderrDest,  created,  lastModified, jobID,        outTmp,       errTmp,       validationResult, computingSystem
jobDefinition field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, INT,    INT,      INT,      INT,      INT NULL,       INT NULL, VARCHAR, LONGVARCHAR, LONGVARCHAR,    LONGVARCHAR, LONGVARCHAR,    LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, DATETIME, DATETIME,     VARCHAR NULL, VARCHAR NULL, VARCHAR NULL, LONGVARCHAR NULL, VARCHAR NULL

transformation field names = identifier, name, version, runtimeEnvironmentName, arguments, outputFiles, script, comment, created, lastModified, inputFiles
transformation field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, VARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, DATETIME, DATETIME, LONGVARCHAR

runtimeEnvironment field names = identifier, name, computingSystem, certificate, url, initLines, created, lastModified
runtimeEnvironment field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, DATETIME, DATETIME

# This is to have an explicit file catalog

file field names = lfname, pfname, filetype, md5sum, fsize, lastmodified, archival, dsname, guid

t_lfn field names = lfname, guid
t_lfn field types = LONGVARCHAR, VARCHAR NULL

t_pfn field names = pfname, guid, filetype
t_pfn field types = LONGVARCHAR, VARCHAR NULL, LONGVARCHAR NULL

t_meta field names = guid, md5sum, fsize, lastmodified, archival, dsname
t_meta field types = VARCHAR, LONGVARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR, VARCHAR

#--------------------------------------------------------------------
[CTB_local]
#
# Example of local dataset/job catalog definitions for CTB
# production.
#
class = gridpilot.dbplugins.hsqldb.HSQLDBDatabase
driver = org.hsqldb.jdbcDriver
database = file:/tmp/CTB-2006-1
user = sa
password = ""

parameters = driver database user password

default dataset fields = name runNumber identifier
hidden dataset fields = projectName physicsWorkingGroup physicsShort detectorLayout status principalSite softwareRelease physicsPackage externalPackages outputFormat percentageValidatedFiles percentageFailedFiles totalFiles totalDataSize averageEventSize totalEvents averageCPUTime totalCPUTime requestedBy comment created lastModified transValues beam_energy mag_field beam_polarity beam_particle magneticField_Type ID_magneticField MBPL_magneticField MBPS_magneticField eta z theta Pix_StatusWord SCT_StatusWord TRT_StatusWord LAr_StatusWord Tile_StatusWord TileEB_StatusWord MDT_StatusWord TGC_StatusWord RPC_StatusWord CSC_StatusWord BEE_StatusWord Pix_xBeamPosition SCT_xBeamPosition TRT_xBeamPosition TRT_yBeamPosition TRT_zBeamPosition LArTile_xBeamPosition Muon_xBeamPosition MuonBee_xBeamPosition
default jobDefinition fields = name status
default file fields = name datasetName url

# CTB simulation, digitization and reconstruction

dataset field names = identifier,                                           name,                 runNumber,    transformationName, transformationVersion, projectName,      physicsWorkingGroup, physicsShort,     detectorLayout,   status,       principalSite,    softwareRelease, physicsPackage, externalPackages, outputFormat, percentageValidatedFiles, percentageFailedFiles, totalFiles,  totalDataSize, averageEventSize, totalEvents, averageCPUTime, totalCPUTime, requestedBy,      comment,          created,  lastModified, beamEnergy,  mag_field,    beam_polarity, beamParticle, magneticField_Type, ID_magneticField, MBPL_magneticField, MBPS_magneticField, eta,        z,          theta,      Pix_StatusWord, SCT_StatusWord, TRT_StatusWord, LAr_StatusWord, Tile_StatusWord, TileEB_StatusWord, MDT_StatusWord, TGC_StatusWord, RPC_StatusWord, CSC_StatusWord, BEE_StatusWord, Pix_xBeamPosition, SCT_xBeamPosition, TRT_xBeamPosition, TRT_yBeamPosition, TRT_zBeamPosition, LArTile_xBeamPosition, Muon_xBeamPosition, MuonBee_xBeamPosition, dataType,     inputDataset,     inputDB,          outputLocation
dataset field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR NOT NULL, INT NOT NULL, LONGVARCHAR NULL,   LONGVARCHAR NULL,      LONGVARCHAR NULL, LONGVARCHAR NULL,    LONGVARCHAR NULL, LONGVARCHAR NULL, VARCHAR NULL, LONGVARCHAR NULL, VARCHAR NULL,    VARCHAR NULL,   LONGVARCHAR NULL, VARCHAR NULL, FLOAT NULL,               FLOAT NULL,            BIGINT NULL, FLOAT NULL,    FLOAT NULL,       BIGINT NULL, FLOAT NULL,     BIGINT NULL,  LONGVARCHAR NULL, LONGVARCHAR NULL, DATETIME, DATETIME,     FLOAT NULL,  VARCHAR NULL, TINYINT NULL,  VARCHAR NULL, VARCHAR NULL,       FLOAT NULL,       FLOAT NULL,         FLOAT NULL,         FLOAT NULL, FLOAT NULL, FLOAT NULL, TINYINT NULL,   TINYINT NULL,   TINYINT NULL,   TINYINT NULL,   TINYINT NULL,    TINYINT NULL,      TINYINT NULL,   TINYINT NULL,   TINYINT NULL,   TINYINT NULL,   TINYINT NULL,   FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,            FLOAT NULL,         FLOAT NULL,            VARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR NULL, LONGVARCHAR NULL

jobDefinition field names = identifier,                                           datasetName, name,        GUID,        number, eventMin, eventMax, nEvents,  outputFileSize, CPU,      status,  userInfo,    inputFileNames, transPars,   outFileMapping, md5sum,      stdoutDest,  stderrDest,  productionSite, hostMachine, storageType,  created,  lastModified, jobID,        outTmp,       errTmp,       validationResult, computingSystem
jobDefinition field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, INT,    INT,      INT,      INT,      INT NULL,       INT NULL, VARCHAR, LONGVARCHAR, LONGVARCHAR,    LONGVARCHAR, LONGVARCHAR,    LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, VARCHAR,        VARCHAR,     VARCHAR NULL, DATETIME, DATETIME,     VARCHAR NULL, VARCHAR NULL, VARCHAR NULL, LONGVARCHAR NULL, VARCHAR NULL

transformation field names = identifier, name, version, runtimeEnvironmentName, arguments, outputFiles, script, comment, created, lastModified, inputFiles
transformation field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, VARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, DATETIME, DATETIME, LONGVARCHAR

runtimeEnvironment field names = identifier, name, computingSystem, certificate, url, initLines, created, lastModified
runtimeEnvironment field types = INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, LONGVARCHAR, DATETIME, DATETIME

#--------------------------------------------------------------------
[My_DB_Geneva]
#
# Minimal dataset/job catalog for personal production/analysis
# The database and user name are deduced from the user certificate.
# The authentication is also done with the user certificate.
# A explicit file catalog should not be needed.
#
class = gridpilot.dbplugins.mysql.MySQLDatabase
driver = org.gjt.mm.mysql.Driver
database = jdbc:mysql://grid01.unige.ch:3306/

parameters = driver database user password

default dataset fields = name runNumber identifier
hidden dataset fields = metaData
default jobDefinition fields = name status
default file fields = name datasetName url

# NOTICE: semi-colon will be replaced with comma after parsing the fields

dataset field names = identifier,                                      name,                         transformationName, transformationVersion, metaData,  totalFiles,   totalEvents,  created,  lastModified, inputDataset,      inputDB,           outputLocation
dataset field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255) NOT NULL UNIQUE, VARCHAR(255) NULL,  VARCHAR(255) NULL,     TEXT NULL, INT(20) NULL, INT(20) NULL, DATETIME, DATETIME,     VARCHAR(255) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL

jobDefinition field names = identifier, datasetName, name, GUID, number, eventMin, eventMax, nEvents, outputFileSize, CPU, status, userInfo, inputFileNames, transPars, outFileMapping, md5sum, stdoutDest, stderrDest, created, lastModified, jobID, outTmp, errTmp, validationResult, computingSystem
jobDefinition field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(255), VARCHAR(255), INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, ENUM('Defined'; 'Submitted'; 'Validated'; 'Failed'; 'Undecided'; 'Aborted') NULL, VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(55), VARCHAR(255), VARCHAR(255), DATETIME, DATETIME, VARCHAR(255) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL, TEXT NULL, VARCHAR(255) NULL

transformation field names = identifier, name, version, runtimeEnvironmentName, arguments, outputFiles, script, comment, created, lastModified, inputFiles
transformation field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(55), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), DATETIME, DATETIME, VARCHAR(255)

runtimeEnvironment field names = identifier, name, computingSystem, certificate, url, initLines, created, lastModified
runtimeEnvironment field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(255), TEXT, VARCHAR(255), TEXT, DATETIME, DATETIME

#--------------------------------------------------------------------
[ATLAS_CH]
#
# Central Swiss dataset and file catalog.
# The (MySQL) database is hosted on a server at the
# the University of Geneva. Authentication is done with the grid
# certificate (user/password empty).
# Read access to non-Swiss-VO users can be granted with user
# 'dq2user' and password 'dqpwd'.
#
class = gridpilot.dbplugins.mysql.MySQLDatabase
driver = org.gjt.mm.mysql.Driver
database = jdbc:mysql://grid01.unige.ch:3306/atlas_ch

parameters = driver database user password

default dataset fields = name runNumber identifier
hidden dataset fields = metaData
default file fields = dsname lfname pfname guid
hidden file fields = sync
file identifier = guid
file name = lfname
file dataset reference = name dsname


# NOTICE: semi-colon will be replaced with comma after parsing the fields

dataset field names = identifier,                                      name,                         transformationName, transformationVersion, metaData,  totalFiles,   totalEvents,  created,  lastModified, inputDataset,      inputDB,           outputLocation
dataset field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255) NOT NULL UNIQUE, VARCHAR(255) NULL,  VARCHAR(255) NULL,     TEXT NULL, INT(20) NULL, INT(20) NULL, DATETIME, DATETIME,     VARCHAR(255) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL

# This is to have an explicit file catalog

file field names = lfname, pfname, filetype, md5sum, fsize, lastmodified, archival, dsname, guid

t_lfn field names = lfname, guid
t_lfn field types = VARCHAR(250) PRIMARY KEY, VARCHAR(40) DEFAULT NULL

t_pfn field names = pfname, guid, filetype
t_pfn field types = VARCHAR(250) PRIMARY KEY, VARCHAR(40) DEFAULT NULL, VARCHAR(250) DEFAULT NULL

t_meta field names = guid, md5sum, fsize, lastmodified, archival, dsname, sync
t_meta field types = VARCHAR(40) PRIMARY KEY, BLOB DEFAULT NULL, BLOB DEFAULT NULL, BLOB DEFAULT NULL, BLOB DEFAULT NULL, VARCHAR(250), VARCHAR(40)

#--------------------------------------------------------------------
[CTB_Geneva]
#
# Example of central, common dataset/job catalog definitions for CTB
# production, with metadata. The (MySQL) database is hosted on a server
# atthe University of Geneva. Authentication is done with a shared
# user name / password.
#
class = gridpilot.dbplugins.mysql.MySQLDatabase
driver = org.gjt.mm.mysql.Driver
database = jdbc:mysql://grid01.unige.ch:3306/CTB-2006-1
user = ctbuser
password = 

parameters = driver database user password

default dataset fields = name runNumber
hidden dataset fields = projectName physicsWorkingGroup physicsShort detectorLayout status principalSite softwareRelease physicsPackage externalPackages outputFormat percentageValidatedFiles percentageFailedFiles totalFiles totalDataSize averageEventSize totalEvents averageCPUTime totalCPUTime requestedBy comment created lastModified beam_energy mag_field beam_polarity beam_particle magneticField_Type ID_magneticField MBPL_magneticField MBPS_magneticField eta z theta Pix_StatusWord SCT_StatusWord TRT_StatusWord LAr_StatusWord Tile_StatusWord TileEB_StatusWord MDT_StatusWord TGC_StatusWord RPC_StatusWord CSC_StatusWord BEE_StatusWord Pix_xBeamPosition SCT_xBeamPosition TRT_xBeamPosition TRT_yBeamPosition TRT_zBeamPosition LArTile_xBeamPosition Muon_xBeamPosition MuonBee_xBeamPosition
default jobDefinition fields = name status
default file fields = name datasetName url

# CTB simulation, digitization and reconstruction
# NOTICE: semi-colon will be replaced with comma after parsing the fields

dataset field names = identifier,                                      name,                         runNumber,        transformationName, transformationVersion, projectName,       physicsWorkingGroup, physicsShort,      detectorLayout,    status,                                                                      principalSite,      softwareRelease,   physicsPackage,                      externalPackages,  outputFormat,         percentageValidatedFiles, percentageFailedFiles, totalFiles,   totalDataSize, averageEventSize, totalEvents,  averageCPUTime, totalCPUTime, requestedBy,       comment,           created,  lastModified, beamEnergy, mag_field,         beam_polarity,    beamParticle,                                                                                 magneticField_Type,            ID_magneticField, MBPL_magneticField, MBPS_magneticField, eta,        z,          theta,      Pix_StatusWord,       SCT_StatusWord,       TRT_StatusWord,       LAr_StatusWord,       Tile_StatusWord,      TileEB_StatusWord,    MDT_StatusWord,       TGC_StatusWord,       RPC_StatusWord,       CSC_StatusWord,       BEE_StatusWord,       Pix_xBeamPosition, SCT_xBeamPosition, TRT_xBeamPosition, TRT_yBeamPosition, TRT_zBeamPosition, LArTile_xBeamPosition, Muon_xBeamPosition, MuonBee_xBeamPosition, dataType,                                                                             inputDataset,      inputDB,           outputLocation
dataset field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255) NOT NULL UNIQUE, INT(16) NOT NULL, VARCHAR(255) NULL,  VARCHAR(255) NULL,     VARCHAR(255) NULL, VARCHAR(255) NULL,   VARCHAR(255) NULL, VARCHAR(255) NULL, ENUM('Requested'; 'Approved'; 'Running'; 'Finished'; 'Validated'; 'Failed'), VARCHAR(255) NULL,  VARCHAR(255) NULL, ENUM('GEANT3'; 'GEANT4'; 'ATLFAST'), VARCHAR(255) NULL, ENUM('pool'; 'root'), FLOAT NULL,               FLOAT NULL,            INT(20) NULL, FLOAT NULL,    FLOAT NULL,       INT(20) NULL, FLOAT NULL,     INT(20) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL, DATETIME, DATETIME,     FLOAT NULL, VARCHAR(255) NULL, TINYINT(16) NULL, ENUM('no beam'; 'photon'; 'electron'; 'muon'; 'pion'; 'proton'; 'gamma'; 'other'; 'unknown'), ENUM('constant'; 'field map'), FLOAT NULL,       FLOAT NULL,         FLOAT NULL,         FLOAT NULL, FLOAT NULL, FLOAT NULL, ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), ENUM('-1'; '0'; '1'), FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,        FLOAT NULL,            FLOAT NULL,         FLOAT NULL,            ENUM('EVGEN'; 'ESD'; 'AOD'; 'BYTESTREAM'; 'TAG'; 'HITS'; 'RDO'; 'DIGITS'; 'DATASET'), VARCHAR(255) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL

jobDefinition field names = identifier, datasetName, name, GUID, number, eventMin, eventMax, nEvents, outputFileSize, CPU, status, userInfo, inputFileNames, transPars, outFileMapping, md5sum, stdoutDest, stderrDest, productionSite, hostMachine, storageType, created, lastModified, jobID, outTmp, errTmp, validationResult, computingSystem
jobDefinition field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(255), VARCHAR(255), INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, INT(16) NULL, ENUM('Defined'; 'Submitted'; 'Validated'; 'Failed'; 'Undecided'; 'Aborted') NULL, VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(55), VARCHAR(55), ENUM('HPSS'; 'CASTOR'; 'DISK'; 'TAPE'; 'SRM'; 'GRIDFTP') NULL, DATETIME, DATETIME, VARCHAR(255) NULL, VARCHAR(255) NULL, VARCHAR(255) NULL, TEXT NULL, VARCHAR(255) NULL

transformation field names = identifier, name, version, runtimeEnvironmentName, arguments, outputFiles, script, comment, created, lastModified, inputFiles
transformation field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(55), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), VARCHAR(255), DATETIME, DATETIME, VARCHAR(255)

runtimeEnvironment field names = identifier, name, computingSystem, certificate, url, initLines, created, lastModified
runtimeEnvironment field types = INT(16) DEFAULT NULL AUTO_INCREMENT PRIMARY KEY, VARCHAR(255), VARCHAR(255), TEXT, VARCHAR(255), TEXT, DATETIME, DATETIME

#--------------------------------------------------------------------
[ATLAS]
#
# Central ATLAS dataset and file catalog. The dataset catalog is the
# DQ2 server at CERN. The file catalog is a combination of the DQ2 server
# at CERN and the LFC and MySQL catalogs registered as sites in the
# TiersOfAtlas file at CERN. Writing file information is done by writing
# to the MySQL database registered as alias for the home LFC server (CSCS).
# Authentication and authorization on this MySQL database is done via the
# grid certificate. The MySQL database is synchronized with the LFC database
# by a cron job running on the MySQL server.
#
class = gridpilot.dbplugins.atlas.ATLASDatabase

parameters = 

# DQ2 parameters
DQ2 server = atlddmpro.cern.ch
DQ2 port = 8000
DQ2 secure port = 8443
DQ2 path = /dq2

# The "home" LFC or MySQL server (its alias from TOA) and, for an LFC server,
# its optional MySQL URL alias; if the "home" server is an LFC sercer and
# no MySQL alias is given, there is only read access.
# If a MySQL alias is given, write access is obtained by not specifying any
# user:password in the URL. In this case the grid certificate is used for authentication.
home catalog server = CSCS mysql://dq2user:dqpwd@grid01.unige.ch:3306/localreplicas
# File catalog timeout in miliseconds
file catalog timeout = 5000
default dataset fields = dsn incomplete complete vuid
dataset identifier = vuid
dataset name = dsn
# Notice: because of DQ2 limitations: if you want to be able to download/replicat files
#         this list MUST be the full list: dsn lfn pfns guid
default file fields = dsn lfn pfns guid
file identifier = guid
file name = lfn
file dataset reference = dsn dsn
# The file to resolve site names to lfc servers
tiers of atlas = http://atlas.web.cern.ch/Atlas/GROUPS/DATABASE/project/ddm/releases/TiersOfATLASCache.py

#####################################################################
[Computing systems]
#
# Backends for executing computing jobs.
#

systems = FORK # NG GPSS LSF@CERN

#--------------------------------------------------------------------
[FORK]
#
# Run jobs on the local computer, either directly or via QEMU.
#

## Sub-section for GridPilot
host = localhost
user =
password =
class = gridpilot.csplugins.fork.ForkComputingSystem
working directory = ~/GridPilot/jobs
max jobs by update = 40

## Sub-Section for this plug-in
shell = /bin/bash
# Directory with runtime setup scripts
runtime directory = ~/GridPilot/runtimeEnvironments
# Where to create a sample test transformation. If not defined, none is created.
transformation directory = ~/GridPilot/transformations
# In which DB to write the runtime environment records. If not specified,
# runtime environment records must be defined by hand.
runtime database = My_DB_local

## Sub-section for picking up jobs from external database
# Certificate used by submitters to encrypt their
# proxy certificate+key to the GridPilot picking up
# the job. Only needed to pick up jobs.
# NOTICE: the certificate should NOT include a key!
#public certificate = C:\Documents and Settings\Frederik Orellana\.globus\usercert.pem
# Remote DB to announce runtime environments and
# from where to pick up jobs. 
# Only needed to pick up jobs.
#remote database = My_DB_Geneva

#--------------------------------------------------------------------
[GPSS]
#
# Submit jobs to a GridPilot database somewhere,
# where they will be picked up by other GridPilots.
#

## Sub-Section for GridPilot
host = grid01.unige.ch
user = root
password =
class = gridpilot.csplugins.gridpilot.GridPilotComputingSystem
working directory = ~/GridPilot
max jobs by update = 40

## Sub-Section for this plug-in
shell = /bin/bash
runtime directory = /tmp/runtime
# Where to write the jobDefinitions.
remote database = My_DB_Geneva

#--------------------------------------------------------------------
[LSF@CERN]
#
# Submit jobs to the LSF batch system at CERN. The interaction is
# done via an intermediate remote shell on a server at CERN.
#

## Sub-section for GridPilot
host = lxplus.cern.ch
user = fjob
password = 
class = gridpilot.csplugins.lsf.LSFComputingSystem
working directory = ~/GridPilot
max jobs by update = 40

## Sub-Section for this plug-in
packageID = LSF@CERN
# Directory with runtime setup scripts
runtime directory = /afs/cern.ch/bla/bla
# Where to write the runtime records
runtime database = My_DB_local
# TODO: drop all these
shell = /usr/bin/env zsh
submission command = bsub -q 1nh
#submission command = bsub  -R type==LINUX6 -q prod400 -R "cpuf>1.5&&maxmem>500"
check command = bjobs
copy command = rfcp
remove command = rfrm
mkdir command = rfmkdir
kill command = bkill

#--------------------------------------------------------------------
[NG]
#
# Submit jobs to NorduGrid. All interaction is done in pure java.
#

## Sub-section for GridPilot
class = gridpilot.csplugins.ng.NGComputingSystem
max jobs by update = 10
working directory = GridPilot

## Sub-Section for this plug-in
# Where to write the runtime records
runtime database = My_DB_local
use information system = yes
# The GIIS information servers to query for clusters
GIISes = ldap://odin.switch.ch:2135/Mds-Vo-name=Switzerland,o=grid # index4.nordugrid.org
# explicitly choose clusters. If this is set, GIIS servers will not be queried.
clusters = grid00.unige.ch # grid01.unige.ch lheppc10.unibe.ch hypatia.uio.no hagrid.it.uu.se benedict.grid.aau.dk nordugrid.unibe.ch nordugrid-lcg.projects.cscs.ch
# Required CPU time in minutes.
cpu time = 1800
# Number of seconds before timeout of proxy when proxy will be renewed.
timeleft limit = 86400
shell = /bin/sh

